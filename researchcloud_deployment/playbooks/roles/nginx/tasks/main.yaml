---
# This task is needed but this settings is already set by SRC-NGINX
#- name: Allow for long server domainnames in nginx.conf (the autogenerated domainnames are long)
#  shell: sed -i -e 's/# server_names_hash_bucket_size 64;/server_names_hash_bucket_size 128;/g' /etc/nginx/nginx.conf

- name: Change access_log configuration; send access logs to rsyslog
  shell: sed -i -e 's/access_log.*;/access_log syslog:server=unix:\/dev\/log,facility=local7,tag=nginx;/g' /etc/nginx/nginx.conf

- name: Change error_log configuration; send error logs to rsyslog
  shell: sed -i -e 's/error_log.*;/error_log syslog:server=unix:\/dev\/log,facility=local7,tag=nginx;/g' /etc/nginx/nginx.conf

- name: Restart the Nginx service
  ansible.builtin.systemd:
    name: nginx.service
    state: restarted
    daemon_reload: true
